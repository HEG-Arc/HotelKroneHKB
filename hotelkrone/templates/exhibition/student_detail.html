{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
      <title>Hotel Krone: {{ object.first_name }} {{ object.last_name }}</title>
      <meta http-equiv="Content-Type"   content="text/html; charset=UTF-8">
      <meta property="og:url"           content="https://hotelkrone.be" />
      <meta property="og:type"          content="website" />
      <meta property="og:title"         content="Homepage of the BA Fine Arts Diploma 2020, HKB, Bern" />
      <meta property="og:description"   content="This page presents the works of the BA fine arts diploma students of the HKB Bern" />
      <meta property="og:description"   content="Diploma, HKB, hotelkrone, hotelkrone.be, fine arts, BA fine arts, Bachelor fine arts" />

      <meta name="viewport" content="width=device-width, initial-scale=1">

      <meta name="keywords" content="diploma BA fine arts, HKB, Bern, Hochschule der Künste, Kunsthauslangenthal, Soraya Amini, Louna Berkane, Adriana Bravo, Rozenn Droz, Benjamin Gaschen, Zeno Germinale, Lukas Hirschhofer, Quentin Keller, Lea Luzifer, Kira Mäder, Matteo Petruzzi, Sina Schöpf, Anouk Ursin, Lisa Zuber">
      <meta name="description" content="Homepage of the BA Fine Arts Diploma 2020, HKB, Bern">
      <meta name="date" content="June 2020">

      <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
      <link rel="stylesheet" href="{% static 'css/fontawesome.min.css' %}"/>
      <link rel="stylesheet" href="{% static 'css/solid.min.css' %}"/>
	  <link rel="stylesheet" href="https://cdn.hotelkrone.be/css/master-hk.css"/>
      <link rel="stylesheet" href="{% static 'css/project.css' %}"/>

      <link rel="icon" type="image/jpg" href="{% static 'media/webicon.jpg' %}">

      {% include "exhibition/snippet_tracker.html" %}
  </head>

  <body>
      <div id="main-student">

        <div id="topline">
          <div id="corner-top-left"></div>
          <div id="top-hotel">
            <div id="title-hotel">
              <a href="{% url 'home' %}" class="linknames title">Hotel Krone</a>
              <span class="subtitlestud">
                {% if prev_student %}
                  <a href="{{ prev_student.get_absolute_url }}" class="arrow linknames"><img src="{% static 'media/arrow-prev.png' %}" width="15px" alt="">&nbsp</a>
                {% endif %}
                  {{ object.first_name }} {{ object.last_name }}
                {% if next_student %}
                  <a href="{{ next_student.get_absolute_url }}" class="arrow linknames">&nbsp<img src="{% static 'media/arrow-next.png' %}" width="15px" alt=""></a>
                {% endif %}
              </span>

            </div>
          </div>
          <div id="corner-top-right"></div>
        </div>

      <div id="middle">
			  <div id="mar-left">
          {%  if not object.orten %}
            <div id="txtleft"><span class="greytext">x</span></div>
          {% else %}
            <div id="txtleft"><a href="{{ object.orten.first.get_absolute_url }}" class="linkstudent">{{ object.orten.first.name }}</a></div>
          {% endif %}
        </div>

          <div id="key-student">
              <div id="carouselcont">
                <div id="carouselExampleCaptions" class="carousel slide" data-interval="false">
                  <!-- <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel" data-interval="10000"> -->
                  <div class="carousel-inner">
  
                    {% for media in artworks %}
                      <div class="carousel-item{% if forloop.first %} active{% endif %}">

                        {% if media.sound %}
                                      <div class="card">

                                        <!-- Card image -->
                                        <div class="view">
                                          <img class="card-img-top" src="{{ media.image.url }}"
                                            alt="Card image cap">
                                          <div class="mask gradient-card"></div>
                                        </div>

                                        <!-- Card content -->
                                        <div class="card-body text-center">

                                          <h5 class="h5 font-weight-bold">{{ object.first_name }} {{ object.last_name }}</h5>
                                          <p class="mb-0">{{ media.name }}</p>

                                          <audio id="music" preload="true">
                                              <source src="{{ media.sound.url }}" type="audio/mpeg">
                                          </audio>
                                          <div id="audioplayer">
                                              <i id="pButton" class="fas fa-play"></i>
                                              <div id="timeline">
                                                  <div id="playhead"></div>
                                              </div>
                                          </div>

                                        </div>

                                      </div>
                                        <style>
                                            #pButton {
                                              float: left; }

                                            #timeline {
                                              width: 92%;
                                              height: 3px;
                                              margin-top: 20px;
                                              margin-left: 10px;
                                              float: left;
                                              -webkit-border-radius: 15px;
                                              border-radius: 15px;
                                              background: rgba(0, 0, 0, 0.3); }

                                            #pButton {
                                              margin-top: 12px;
                                              cursor: pointer; }

                                            #playhead {
                                              width: 8px;
                                              height: 8px;
                                              -webkit-border-radius: 50%;
                                              border-radius: 50%;
                                              margin-top: -3px;
                                              background: black;
                                              cursor: pointer; }

                                        </style>
                                        <script>
                                          var music = document.getElementById('music'); // id for audio element
                                          var duration = music.duration; // Duration of audio clip, calculated here for embedding purposes
                                          var pButton = document.getElementById('pButton'); // play button
                                          var playhead = document.getElementById('playhead'); // playhead
                                          var timeline = document.getElementById('timeline'); // timeline

                                          // timeline width adjusted for playhead
                                          var timelineWidth = timeline.offsetWidth - playhead.offsetWidth;

                                          // play button event listenter
                                          pButton.addEventListener("click", play);

                                          // timeupdate event listener
                                          music.addEventListener("timeupdate", timeUpdate, false);

                                          // makes timeline clickable
                                          timeline.addEventListener("click", function (event) {
                                              moveplayhead(event);
                                              music.currentTime = duration * clickPercent(event);
                                          }, false);

                                          // returns click as decimal (.77) of the total timelineWidth
                                          function clickPercent(event) {
                                              return (event.clientX - getPosition(timeline)) / timelineWidth;
                                          }

                                          // makes playhead draggable
                                          playhead.addEventListener('mousedown', mouseDown, false);
                                          window.addEventListener('mouseup', mouseUp, false);

                                          // Boolean value so that audio position is updated only when the playhead is released
                                          var onplayhead = false;

                                          // mouseDown EventListener
                                          function mouseDown() {
                                              onplayhead = true;
                                              window.addEventListener('mousemove', moveplayhead, true);
                                              music.removeEventListener('timeupdate', timeUpdate, false);
                                          }

                                          // mouseUp EventListener
                                          // getting input from all mouse clicks
                                          function mouseUp(event) {
                                              if (onplayhead == true) {
                                                  moveplayhead(event);
                                                  window.removeEventListener('mousemove', moveplayhead, true);
                                                  // change current time
                                                  music.currentTime = duration * clickPercent(event);
                                                  music.addEventListener('timeupdate', timeUpdate, false);
                                              }
                                              onplayhead = false;
                                          }
                                          // mousemove EventListener
                                          // Moves playhead as user drags
                                          function moveplayhead(event) {
                                              var newMargLeft = event.clientX - getPosition(timeline);

                                              if (newMargLeft >= 0 && newMargLeft <= timelineWidth) {
                                                  playhead.style.marginLeft = newMargLeft + "px";
                                              }
                                              if (newMargLeft < 0) {
                                                  playhead.style.marginLeft = "0px";
                                              }
                                              if (newMargLeft > timelineWidth) {
                                                  playhead.style.marginLeft = timelineWidth + "px";
                                              }
                                          }

                                          // timeUpdate
                                          // Synchronizes playhead position with current point in audio
                                          function timeUpdate() {
                                              var playPercent = timelineWidth * (music.currentTime / duration);
                                              playhead.style.marginLeft = playPercent + "px";
                                              if (music.currentTime == duration) {
                                                  pButton.className = "";
                                                  pButton.className = "fas fa-play";
                                              }
                                          }

                                          //Play and Pause
                                          function play() {
                                              // start music
                                              if (music.paused) {
                                                  music.play();
                                                  // remove play, add pause
                                                  pButton.className = "";
                                                  pButton.className = "fas fa-pause";
                                              } else { // pause music
                                                  music.pause();
                                                  // remove pause, add play
                                                  pButton.className = "";
                                                  pButton.className = "fas fa-play";
                                              }
                                          }

                                          // Gets audio file duration
                                          music.addEventListener("canplaythrough", function () {
                                              duration = music.duration;
                                          }, false);

                                          // getPosition
                                          // Returns elements left position relative to top-left of viewport
                                          function getPosition(el) {
                                              return el.getBoundingClientRect().left;
                                          }
                                        </script>
                                      <!-- Card -->
                        {% elif media.image %}
                            <img src="{{ media.image.url }}" class="d-block w-100">
                        {% else %}

                            {{ media.html_embed|safe }}
                        {% endif %}
                        <div class="carousel-capt">
                          <p class="carousel-capt-title">{{ media.name }}</p>
                          <p class="carousel-capt-txt">{{ media.legend }}</p>
                          <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                            <img src="{% static 'media/arrow-prev.png' %}" width="20px" alt="">
                            <span class="sr-only">Previous</span>
                          </a>
                          <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                            <img src="{% static 'media/arrow-next.png' %}" width="20px" alt="">
                            <span class="sr-only">Next</span>
                          </a>
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            

                <div id="ground-student">

                  <div id="groundtextthesis">
					          {{ object.bachelor_thesis_abstract|safe }}
                  </div>
                  <div id="groundstudlinks">
                    <dl>
                      {% if object.personal_website %}
                      <dt>Website:</dt> <dd><a href="{{ object.personal_website }}" class="linkund externlink" target="_blank">{{ object.personal_website }}</a></dd>
                      {% endif %}
                      {% if object.instagram_handle %}
                        <dt>Instagram:</dt> <dd> <a href="https://www.instagram.com/{{ object.instagram_handle }}" class="linkund externlink" target="_blank">@{{ object.instagram_handle }}</a></dd>
                      {% endif %}
                      {% if object.project_website %}
                        <dt>{% if object.project_website2 %}Projects: </dt>{% else %}Project: </dt>{% endif %}<dd> <a href="{{ object.project_website }}" class="linkund externlink" target="_blank">{{ object.project_website }}</a>{% if object.project_website2 %} | <a href="{{ object.project_website2 }}">{{ object.project_website2 }}</a>{% endif %}</dd>
                      {% endif %}
                      {% if object.kleio_profile %}
                        <dt>Kleio: </dt> <dd><a href="{{ object.kleio_profile }}" class="linkund externlink" target="_blank">{{ object.kleio_profile }}</a></dd>
                      {% endif %}
                      {% if object.portfolio %}
                        <dd class="portfolio">Download portfolio as pdf file <a href="{{ object.portfolio.url }}" class="linkund externlink" target="_blank">here</a></dd>
                      {% endif %}
                    </dl>
                  </div>
                </div>
            </div>
			      <div id="mar-right">
              {%  if not object.orten or object.orten.first == object.orten.last %}
                <div id="txtright"><span class="greytext">x</span></div>
              {% else %}
                <div id="txtright"><a href="{{ object.orten.last.get_absolute_url }}" class="linkstudent">{{ object.orten.last.name }}</a></div>
              {% endif %}
            </div>
			
            {% include "exhibition/snippet_footer.html" %}
        </div>
      </div>

    </div>

    {% include "exhibition/snippet_impressum.html" %}

      <script src="{% static 'js/jquery-3.5.1.slim.min.js' %}"></script>
      <script src="{% static 'js/popper.min.js' %}"></script>
      <script src="{% static 'js/bootstrap.min.js' %}"></script>
      <script>
          function toggleOverlay(mediaId) {
              let x = document.getElementById(mediaId);
              if (x.style.display === "none") {
                x.style.display = "block";
                document.body.classList.add("noscroll");
              } else {
                x.style.display = "none";
                document.body.classList.remove("noscroll");
              }
          }
      </script>
  </body>
</html>
